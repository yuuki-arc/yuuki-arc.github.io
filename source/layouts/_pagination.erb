<div class="text-center">
  <ul class="pagination">
    <li>
      <% if !prev_page.nil? %>
        <%= link_to "<i class=\"fa fa-angle-left\"></i>", prev_page.url %>
      <% else %>
        <a href="javascript:void(0);"><i class="fa fa-angle-left"></i></a>
      <% end %>
    </li>

    <% (page_number - 2 .. page_number + 2).select{|i| i > 0 && i <= num_pages}.each do |i| %>
      <% if i == page_number %>
        <li class="active"><span><%= i %></span></li>
      <% else %>
        <li>
          <% p = nil %>
          <% (i ... page_number).each do p = p ? p.metadata[:locals]['prev_page'] : prev_page; end %>
          <% (page_number ... i).each do p = p ? p.metadata[:locals]['next_page'] : next_page; end %>
          <%= link_to "#{i}", p && p.url %>
        </li>
      <% end %>
    <% end %>

    <li>
      <% if !next_page.nil? %>
        <%= link_to "<i class=\"fa fa-angle-right\"></i>", next_page.url %>
      <% else %>
        <a href="javascript:void(0);"><i class="fa fa-angle-right"></i></a>
      <% end %>
    </li>
  </ul>
</div>
